window.__require=function t(e,i,n){function s(o,r){if(!i[o]){if(!e[o]){var c=o.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!r&&h)return h(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+o+"'")}o=c}var l=i[o]={exports:{}};e[o][0].call(l.exports,function(t){return s(e[o][1][t]||t)},l,l.exports,t,e,i,n)}return i[o].exports}for(var a="function"==typeof __require&&__require,o=0;o<n.length;o++)s(n[o]);return s}({Boss:[function(t,e,i){"use strict";cc._RF.push(e,"6175fNGHFxDdZo7mmudGvlZ","Boss");cc.Class({extends:cc.Component,properties:{special_atk_particle:cc.Node,aniArray:[],explosionPrefabs:cc.Node,hpBar:cc.ProgressBar,barBackground:cc.Node,maxHP:0,init_json:null,isDead:!1,deadIntervalID:null,timout:null},start:function(){this.aniArray=["boss_left_idle","boss_left_hit","boss_left_atk"]},InitBoss:function(t){this.id=t.id,this.init_json_data=t,this.InitDeadStatus(),this.HideSpecialAttack()},SpecialAttack:function(){this.special_atk_particle.active=!0},HideSpecialAttack:function(){console.log("IHIT"),this.special_atk_particle.active=!1},ShowExplosion:function(){this.explosionPrefabs.getComponent(cc.Animation).play("explosion")},UpdateStatus:function(t){switch(t){case-1:this._SetMonsterAnimation(0),this.InitDeadStatus();break;case-6:this._SetMonsterAnimation(2);break;case-4:console.log("HIT STATUS"),this._SetMonsterAnimation(1);break;case-8:this.DeadAnimation()}},InitDeadStatus:function(){0!=this.isDead&&(this.isDead=!1,this.node.opacity=255,this.HideSpecialAttack(),clearInterval(this.deadIntevalID),clearInterval(this.timout))},_SetMonsterAnimation:function(t){var e=this.aniArray[t],i=this.getComponent(cc.Animation);i.getAnimationState(e).isPlaying||("boss_left_hit"===e&&this.ShowExplosion(),i.play(e))},_UpdateHP:function(t){this.monster_type===AGGREE_2&&(this.hpBar.progress=t/this.maxHP,this.hpBar.progress>.6?this.barBackground.color=new cc.Color(0,255,0):this.barBackground.color=new cc.Color(255,0,0))},_InitHP:function(){this.hpBar.progress=this.maxHP,this.barBackground.color=new cc.Color(0,255,0)},DeadAnimation:function(){if(!this.isDead){this.isDead=!0,this._SetMonsterAnimation(1);var t=this;this.ShowExplosion(),this.timout=setTimeout(function(){t.deadIntervalID=setInterval(function(){t.node.opacity-=9,t.node.opacity<1&&clearInterval(t.deadIntervalID)},10)},300)}}}),cc._RF.pop()},{}],Controller:[function(t,e,i){"use strict";cc._RF.push(e,"f836dKWNtlCD4eB7ehfDQhA","Controller");var n=cc.Class({statics:{_instance:null,getInstance:function(){return n._instance||(n._instance=new n),n._instance}},properties:{initJson:null,streamJson:null,loadIndex:0,gameStatus:!1,isGamePause:!1,finalIndex:!1,isGameReset:!1,minigameDone:!1,characterNumber:0,_currentCommandID:0},_setCurrentComandID:function(t){this._currentCommandID=t},getCurrentCommandID:function(){return this._currentCommandID},getCharNumber:function(){return this.characterNumber},setcharNumber:function(t){this.characterNumber=t},getInitStageData:function(){return this.initJson.stage},getInitPlayerData:function(){return this.initJson.player},getInitPrintPointArray:function(t){return this.initJson.item_list[t]},getInitOjbectDatas:function(){return this.initJson.stage.init_item_list},getStreamItemList:function(t){return this.streamJson.data[t]},getCommandLine:function(t){var e=this.streamJson;return null==e?-1:t>=e.data.length?-1:(this._setCurrentComandID(t),e.data[t])},getCommandLength:function(){return this.streamJson.data.length-1},ReceiveJson:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.initJson=t:this.streamJson=t},GetProgressId:function(){return this.loadIndex},SetProgressId:function(t){this.loadIndex=t},GetStatus:function(){return this.gameStatus},SetStatus:function(t){this.gameStatus=t},SetOption:function(t){},InitOption:function(t){},PauseGame:function(){this.isGamePause=!0},ResumeGame:function(){this.isGamePause=!1,this.isGameReset=!1},Resetgame:function(){this.isGameReset=!0}});e.exports=n,window.SetCharacterInfo=function(t){n.getInstance().setcharNumber(t)},window.SendInitData=function(t){return null!=n.getInstance().initJson||(n.getInstance().ReceiveJson(t,!0),!1)},window.SendStreamData=function(t){n.getInstance().isGameReset=!1,n.getInstance().isGamePause=!1,n.getInstance().ReceiveJson(t),n.getInstance().SetProgressId(0),n.getInstance().SetStatus(!0)},window.SetProgressId=function(t){n.getInstance().SetProgressId(t)},window.OnClickPlay=function(){n.getInstance().isGameReset=!1,n.getInstance().isGamePause=!1,n.getInstance().SetStatus(!0)},window.SetOptions=function(t){n.getInstance().SetOption(t)},window.InitOption=function(t){n.getInstance().InitOption(t)},window.ExternalPauseGame=function(){n.getInstance().PauseGame()},window.ExternalResumeGame=function(){n.getInstance().ResumeGame()},window.IsCocosGameLoad=function(){return!!n.getInstance().finalIndex},window.IsMiniGameClear=function(){return!!n.getInstance().minigameDone},window.SetupReset=function(){n.getInstance().Resetgame()},cc._RF.pop()},{}],Env:[function(t,e,i){"use strict";cc._RF.push(e,"79616xg/o1EEq25k+q+RW23","Env"),window.Env={OFFSET_X:96,OFFSET_Y:96,PLAYER_RADIO:48,SFX_FOOTSTEP_L:0,SFX_FOOTSTEP_R:1,SFX_DIRECTORY_PATH:"./sfx/",SFX_FILENAME_DROP_SWITCH:"drop_switch",SFX_FILENAME_LASER_SWITCH:"laser_switch",SFX_FILENAME_EXPLOSION:"explosion",SFX_FILENAME_EARN:"itemEarn",SFX_FILENAME_DROP_ITEM:"drop_item",SFX_FILENAME_LASER_ON:"laser_on",SFX_FILENAME_LASER_OFF:"laser_off",SFX_FILENAME_PARTS_DOCKING:"parts_done",SFX_DROP_SWITCH:0,SFX_LASER_BUTTON:1,SFX_BOMB:2,SFX_EARN_ITEM:3,SFX_DROP_ITEM:4,SFX_LASER_ON:5,SFX_LASER_OFF:6,SFX_PARTS_DOCKING:7,FOOD:0,NORMAL_SWITCH_ON:1,NORMAL_SWITCH_OFF:2,LASER_SWITCH_ON:3,LASER_SWITCH_OFF:4,BATTERY:5,BOMB:6,ROCKET_EMPTY:7,ROCKET_FILLED:8,LASER_START_ON:9,LASER_MIDDLE_ON:10,LASER_END_ON:11,LASER_START_OFF:12,LASER_END_OFF:13,GOAL:14,VLASER_START_ON:15,VLASER_MIDDLE_ON:16,VLASER_END_ON:17,VLASER_START_OFF:18,DOOR_ON:19,DOOR_OFF:20,VARIATION_SWITCH_ON:21,VARIATION_SWITCH_OFF:22,MEDICINE:23,BOMB_BOX:24,MAX_LOAD_IMAGE_LENGTH:25,DIRECTORY_PATH:"./$jin/",FOOD_BOX_FILE_NAME:"foodBox",N_SWITCH_ON_FILE_NAME:"nSwitch_on",N_SWITCH_OFF_FILE_NAME:"nSwitch_off",L_SWITCH_ON_FILE_NAME:"lSwitch_on",L_SWITCH_OFF_FILE_NAME:"lSwitch_off",BATTERY_FILE_NAME:"battery",BOMB_FILE_NAME:"bomb",ROCKET_EMPTY_FILE_NAME:"rocket_empty",ROCKET_FILLED_FILE_NAME:"rocket_fill",L_START_ON_FILE_NAME:"lStart_on",L_MIDDLE_FILE_NAME:"lMiddle_on",L_END_ON_FILE_NAME:"lEnd_on",L_START_OFF_FILE_NAME:"lStart_off",L_END_OFF_FILE_NAME:"lEnd_off",GOAL_FILE_NAME:"floor",VL_START_ON_FILE_NAME:"vlStart_on",VL_MIDDLE_ON_FILE_NAME:"vlMiddle_on",VL_END_ON_FILE_NAME:"vlEnd_on",VL_START_OFF_FILE_NAME:"vlStart_off",FLOOR_FILE_NAME:"floor",DOOR_ON_FILE:"obj_door_f",DOOR_OFF_FILE:"obj_door_s",VARIATION_SWITCH_ON_FILE:"lSwitch_on",VARIATION_SWITCH_OFF_FILE:"lSwitch_off",MEDICINE_FILE:"medicine",BOMB_BOX_FILE:"bomb_box",DIRECTION_UP:"up",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",DIRECTION_DOWN:"down",PLAYER_DEFAULT_UP:0,PLAYER_DEFAULT_DOWN:1,PLAYER_DEFAULT_LEFT:2,PLAYER_DEFAULT_RIGHT:3,ANIMATION_LEFT:"leftRun",ANIMATION_RIGHT:"rightRun",ANIMATION_UP:"upRun",ANIMATION_DOWN:"downRun",ANIMATION_IDLE_LEFT:"left_idle",ANIMATION_IDLE_RIGHT:"right_idle",ANIMATION_IDLE_UP:"idle_back",ANIMATION_IDLE_DOWN:"idle_front",ANIMATION_LEFT_HIT:"hit_left",ANIMATION_RIGHT_HIT:"hit_right",C_MAN:0,C_SUIT_MAN:1,C_WOMAN:2,C_SUIT_WOMAN:3},cc._RF.pop()},{}],GameManager:[function(t,e,i){"use strict";cc._RF.push(e,"727210ZU8hOIIDBp99LB0z6","GameManager");var n=t("../Controller"),s=t("./SoundManager"),a=t("./Loader"),o=t("./SoundManager");cc.Class({extends:cc.Component,properties:{btn_x_plus:cc.Button,btn_x_minus:cc.Button,btn_y_plus:cc.Button,btn_y_minus:cc.Button,btn_zoom_in:cc.Button,btn_zoom_out:cc.Button,btnMan:cc.Button,btnManSuit:cc.Button,btnWoman:cc.Button,btnWomanSuit:cc.Button,loadingBG:cc.Node,isLoaded:!1,isCameraShaked:!1,isPlay:!1,camera:cc.Camera,mapOffset:{default:[]},idx:{default:0,visiable:!1},gameMap:cc.TiledMap,player:cc.Node,spaceShip:cc.Node,bgNode:cc.Node,item:[],dropItemList:[],dropSwitchList:[],goalObject:cc.Node,objectParent:cc.Node,effectParent:cc.Node,audioManager:cc.Node,pList:[],pIdx:0,hList:[],hIdx:0,expList:[],expIdx:0,dropEffectList:[],dropEffectIdx:0,isPlayExplosion:!1,timeCheck:0,startTime:0,isSceneLoaded:!1,print_ui_object:cc.Node,print_ui_label:cc.Label,print_array:[],bomb_sprites:{default:[]},isShowVariation:!1,bomb_sprite_max_range:0,bomb_sprite_id:null,monster_list:[],monster_isDead:[],bossObject:cc.Node},addBtn:function(){this.btnMan.node.on("click",this.btnManShow,this),this.btnManSuit.node.on("click",this.btnManSuitShow,this),this.btnWoman.node.on("click",this.btnWomanShow,this),this.btnWomanSuit.node.on("click",this.btnWomanSuitShow,this),this.btn_x_plus.node.on("click",this.PlusX,this),this.btn_x_minus.node.on("click",this.MinusX,this),this.btn_y_plus.node.on("click",this.PlusY,this),this.btn_y_minus.node.on("click",this.MinusY,this),this.btn_zoom_in.node.on("click",this.ZoomInDeubug,this),this.btn_zoom_out.node.on("click",this.ZoomOutDebug,this)},PlusX:function(){var t=this.camera.node.position.x,e=this.camera.node.position.y;t+=50,this.camera.node.setPosition(cc.v3(t,e,0)),console.log(this.camera.node.position.x+" "+this.camera.node.position.y)},PlusY:function(){var t=this.camera.node.position.x,e=this.camera.node.position.y;e+=50,this.camera.node.setPosition(cc.v3(t,e,0)),console.log(this.camera.node.position.x+" "+this.camera.node.position.y)},MinusX:function(){var t=this.camera.node.position.x,e=this.camera.node.position.y;t-=50,this.camera.node.setPosition(cc.v3(t,e,0)),console.log(this.camera.node.position.x+" "+this.camera.node.position.y)},MinusY:function(){var t=this.camera.node.position.x,e=this.camera.node.position.y;e-=50,this.camera.node.setPosition(cc.v3(t,e,0)),console.log(this.camera.node.position.x+" "+this.camera.node.position.y)},ZoomInDeubug:function(){this.camera.zoomRatio+=.1,console.log("ratio => "+this.camera.zoomRatio)},ZoomOutDebug:function(){this.camera.zoomRatio-=.1,console.log("ratio => "+this.camera.zoomRatio)},btnManShow:function(){n.getInstance().setcharNumber(0)},btnManSuitShow:function(){n.getInstance().setcharNumber(1)},btnWomanShow:function(){n.getInstance().setcharNumber(2)},btnWomanSuitShow:function(){n.getInstance().setcharNumber(3)},onLoad:function(){this.addBtn(),this._InitPrintUI(),this.loadingBG.active=!0,this.EffectInit();var t=this,e=setInterval(function(){null!=a.getInstance().GetImage(0)&&(clearInterval(e),t.InitGame())},5)},start:function(){var t=setInterval(function(){null!=s.getInstance().IsLoadCheck()&&clearInterval(t)},5)},_TileMapShake:function(){var t=this;setTimeout(function(){t.CameraMoveX(2)},300),setTimeout(function(){t.CameraMoveX(-2),t.LoadingFadeOut()},600)},CameraMoveX:function(t){var e=this.camera.node.position,i=e.x-t,n=cc.v3(i,e.y,e.z);this.camera.node.setPosition(n)},LoadingFadeOut:function(){this.loadingBG.active=!1,this.isLoaded=!0,n.getInstance().finalIndex=!0,this.InitialCamera()},InitGame:function(){this.bomb_sprites=[[],[],[]],this.mapOffset=[{x:0,y:2},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:-1},{x:1,y:-2},{x:0,y:-1},{x:-4,y:1},{x:-1,y:-2},{x:0,y:-1},{x:-4,y:1},{x:-1,y:-2},{x:0,y:-1},{x:-4,y:1},{x:0,y:-1},{x:0,y:-1},{x:0,y:-1},{x:0,y:-1},{x:0,y:-1},{x:0,y:-1},{x:0,y:-1},{x:0,y:-1},{x:0,y:-1},{x:-1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:1},{x:0,y:1},{x:-1,y:1},{x:0,y:1},{x:-1,y:1},{x:0,y:-1},{x:0,y:1},{x:-1,y:1},{x:0,y:-1},{x:0,y:1},{x:-1,y:1},{x:0,y:-1},{x:1,y:2},{x:-1,y:1},{x:0,y:1},{x:1,y:2},{x:-1,y:1},{x:0,y:1},{x:1,y:2},{x:-1,y:1},{x:0,y:1},{x:0,y:2},{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:0},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1},{x:0,y:1}],this.loadInit()},GetPointArray:function(){var t=n.getInstance().getInitOjbectDatas();if(null!=t&&""!=t&&!(t.length<1))for(var e=0;e<t.length;e++)if("print_point"===t[e].type){this.print_array=t[e].require_print;break}},loadInit:function(){var t=this,e=setInterval(function(){if(null!=n.getInstance().initJson){if(t.IsBonusStage()){var i=n.getInstance().getInitStageData().step;t.bonusGameSceneLoaded(i)}else t.InitMap(),t.InitPlayer(),t.InitMonster(),t.InitBoss(),t.InitObject(),t.GetPointArray();clearInterval(e)}},5)},IsBonusStage:function(){var t=n.getInstance().getInitStageData().step;return"1-4"==t||"2-4"==t},bonusGameSceneLoaded:function(t){"1-4"===t&&cc.director.loadScene("minigame1")},ShakeEffect:function(){if(!this.isCameraShaked){this.isCameraShaked=!0;var t=cc.v2(5,0),e=this.camera.node.position.clone();this.camera.node.runAction(cc.sequence(cc.moveBy(.02,t),cc.moveBy(.04,t.neg()),cc.moveBy(.02,t.neg()),cc.moveBy(.04,t.neg()),cc.moveTo(0,e)))}},update:function(t){this.isLoaded&&(n.getInstance().GetStatus()&&this.OnCodePlay())},InitPlayer:function(){var t=n.getInstance().getInitPlayerData(),e=t.pos,i=t.dir,s=(t.hp,t.status,t.food_count,t.rocket_parts_count,this.GVector(e[0],e[1]));this.player.getComponent("Player").Init(s,i)},GVector:function(t,e){var i=1*t,s=-1*e,a=n.getInstance().getInitStageData(),o=a.step,r=a.diff,c=a.level,h=this.ConvertGameLevel(o,r,c);return cc.v2((i+this.mapOffset[h].x)*Env.OFFSET_X+Env.PLAYER_RADIO,(s-this.mapOffset[h].y)*Env.OFFSET_Y-Env.PLAYER_RADIO)},InitBoss:function(){var t=n.getInstance().getInitStageData(),e=t.step,i=t.level;if("3-4"===e&&3===i){var s=n.getInstance().getInitOjbectDatas();this.MakeUpBoss(s[0])}},InitMonster:function(){var t=n.getInstance().getInitStageData(),e=t.step,i=t.diff,s=t.level,a=this.ConvertGameLevel(e,i,s);if(!(a<56)&&85!=a&&88!==a&&91!==a)for(var o=n.getInstance().getInitOjbectDatas(),r=0;r<o.length;r++)this.IsMonsterType(o[r].type)&&(this.MakeUpMonster(o[r]),this.monster_isDead.push(!1))},MakeUpMonster:function(t){var e=this;cc.loader.loadRes("./prefabs/monster",cc.Prefab,function(i,n){if(i)cc.error("Error loading image: "+i);else{var s=t.pos[0],a=t.pos[1],o=cc.v2(s,a),r=cc.instantiate(n),c=e.GVector(o.x,o.y);r.getComponent("Monster").InitMonster(t,c),r.setPosition(c),e.monster_list.push(r),e.node.addChild(r)}})},MakeUpBoss:function(t){var e=this;cc.loader.loadRes("./prefabs/boss",cc.Prefab,function(i,n){if(i)cc.error("Error loading image: "+i);else{var s=t.pos[0]+2,a=t.pos[1],o=cc.v2(s,a),r=cc.instantiate(n),c=e.GVector(o.x,o.y);r.getComponent("Boss").InitBoss(t),r.setPosition(c),e.bossObject=r,e.node.addChild(r)}})},IsBoss:function(t){return"boss"===t},IsMonsterType:function(t){return"aggressive_monster_1"===t||("passive_monster"===t||("boss"===t||"aggressive_monster_2"===t))},UpdateMonster:function(t){if(!(t.length<1||this.monster_list.length<1))for(var e=0;e<t.length;e++){var i=this.FindMonsterByID(e);if(null!=i){if("number"!=typeof t[e]){var n=i.getComponent("Monster").GetID();if(-5===t[e].status){this.monster_isDead[n]=!1;var s=this.GVector(t[e].pos[0],t[e].pos[1]);i.getComponent("Monster").Movement(s,t[e].dir)}else if(-4===t[e].status||-8===t[e].status){if(1==this.monster_isDead[n])continue;this.monster_isDead[n]=!0,i.getComponent("Monster").ShowExplosion()}}i.getComponent("Monster").UpdateStatus(t[e])}}},UpdateBoss:function(t){t.length<1||null!=this.bossObject&&this.bossObject.getComponent("Boss").UpdateStatus(t[0])},FindMonsterByID:function(t){for(var e=0;e<this.monster_list.length;e++){if(t==this.monster_list[e].getComponent("Monster").GetID())return this.monster_list[e]}return null},ConvertGameLevel:function(t,e,i){var n=0;return"tutorial"===t?n=i-1:("1-1"===t&&"Easy"===e&&1===i&&(n=2),"1-1"===t&&"Easy"===e&&2===i&&(n=3),"1-1"===t&&"Easy"===e&&3===i&&(n=4),"1-1"===t&&"Normal"===e&&1===i&&(n=5),"1-1"===t&&"Normal"===e&&2===i&&(n=6),"1-1"===t&&"Normal"===e&&3===i&&(n=7),"1-1"===t&&"Hard"===e&&1===i&&(n=8),"1-1"===t&&"Hard"===e&&2===i&&(n=9),"1-1"===t&&"Hard"===e&&3===i&&(n=10),"1-2"===t&&"Easy"===e&&1===i&&(n=11),"1-2"===t&&"Easy"===e&&2===i&&(n=12),"1-2"===t&&"Easy"===e&&3===i&&(n=13),"1-2"===t&&"Normal"===e&&1===i&&(n=14),"1-2"===t&&"Normal"===e&&2===i&&(n=15),"1-2"===t&&"Normal"===e&&3===i&&(n=16),"1-2"===t&&"Hard"===e&&1===i&&(n=17),"1-2"===t&&"Hard"===e&&2===i&&(n=18),"1-2"===t&&"Hard"===e&&3===i&&(n=19),"1-3"===t&&"Easy"===e&&1===i&&(n=20),"1-3"===t&&"Easy"===e&&2===i&&(n=21),"1-3"===t&&"Easy"===e&&3===i&&(n=22),"1-3"===t&&"Normal"===e&&1===i&&(n=23),"1-3"===t&&"Normal"===e&&2===i&&(n=24),"1-3"===t&&"Normal"===e&&3===i&&(n=25),"1-3"===t&&"Hard"===e&&1===i&&(n=26),"1-3"===t&&"Hard"===e&&2===i&&(n=27),"1-3"===t&&"Hard"===e&&3===i&&(n=28),"2-1"===t&&"Easy"===e&&1===i&&(n=29),"2-1"===t&&"Easy"===e&&2===i&&(n=30),"2-1"===t&&"Easy"===e&&3===i&&(n=31),"2-1"===t&&"Normal"===e&&1===i&&(n=32),"2-1"===t&&"Normal"===e&&2===i&&(n=33),"2-1"===t&&"Normal"===e&&3===i&&(n=34),"2-1"===t&&"Hard"===e&&1===i&&(n=35),"2-1"===t&&"Hard"===e&&2===i&&(n=36),"2-1"===t&&"Hard"===e&&3===i&&(n=37),"2-2"===t&&"Easy"===e&&1===i&&(n=38),"2-2"===t&&"Easy"===e&&2===i&&(n=39),"2-2"===t&&"Easy"===e&&3===i&&(n=40),"2-2"===t&&"Normal"===e&&1===i&&(n=41),"2-2"===t&&"Normal"===e&&2===i&&(n=42),"2-2"===t&&"Normal"===e&&3===i&&(n=43),"2-2"===t&&"Hard"===e&&1===i&&(n=44),"2-2"===t&&"Hard"===e&&2===i&&(n=45),"2-2"===t&&"Hard"===e&&3===i&&(n=46),"2-3"===t&&"Easy"===e&&1===i&&(n=47),"2-3"===t&&"Easy"===e&&2===i&&(n=48),"2-3"===t&&"Easy"===e&&3===i&&(n=49),"2-3"===t&&"Normal"===e&&1===i&&(n=50),"2-3"===t&&"Normal"===e&&2===i&&(n=51),"2-3"===t&&"Normal"===e&&3===i&&(n=52),"2-3"===t&&"Hard"===e&&1===i&&(n=53),"2-3"===t&&"Hard"===e&&2===i&&(n=54),"2-3"===t&&"Hard"===e&&3===i&&(n=55),"3-1"===t&&"Easy"===e&&1===i&&(n=56),"3-1"===t&&"Easy"===e&&2===i&&(n=57),"3-1"===t&&"Easy"===e&&3===i&&(n=58),"3-1"===t&&"Normal"===e&&1===i&&(n=59),"3-1"===t&&"Normal"===e&&2===i&&(n=60),"3-1"===t&&"Normal"===e&&3===i&&(n=61),"3-1"===t&&"Hard"===e&&1===i&&(n=62),"3-1"===t&&"Hard"===e&&2===i&&(n=63),"3-1"===t&&"Hard"===e&&3===i&&(n=64),"3-2"===t&&"Easy"===e&&1===i&&(n=65),"3-2"===t&&"Easy"===e&&2===i&&(n=66),"3-2"===t&&"Easy"===e&&3===i&&(n=67),"3-2"===t&&"Normal"===e&&1===i&&(n=68),"3-2"===t&&"Normal"===e&&2===i&&(n=69),"3-2"===t&&"Normal"===e&&3===i&&(n=70),"3-2"===t&&"Hard"===e&&1===i&&(n=71),"3-2"===t&&"Hard"===e&&2===i&&(n=72),"3-2"===t&&"Hard"===e&&3===i&&(n=73),"3-3"===t&&"Easy"===e&&1===i&&(n=74),"3-3"===t&&"Easy"===e&&2===i&&(n=75),"3-3"===t&&"Easy"===e&&3===i&&(n=76),"3-3"===t&&"Normal"===e&&1===i&&(n=77),"3-3"===t&&"Normal"===e&&2===i&&(n=78),"3-3"===t&&"Normal"===e&&3===i&&(n=79),"3-3"===t&&"Hard"===e&&1===i&&(n=80),"3-3"===t&&"Hard"===e&&2===i&&(n=81),"3-3"===t&&"Hard"===e&&3===i&&(n=82),"3-4"===t&&"Easy"===e&&1===i&&(n=83),"3-4"===t&&"Easy"===e&&2===i&&(n=84),"3-4"===t&&"Easy"===e&&3===i&&(n=85),"3-4"===t&&"Normal"===e&&1===i&&(n=86),"3-4"===t&&"Normal"===e&&2===i&&(n=87),"3-4"===t&&"Normal"===e&&3===i&&(n=88),"3-4"===t&&"Hard"===e&&1===i&&(n=89),"3-4"===t&&"Hard"===e&&2===i&&(n=90),"3-4"===t&&"Hard"===e&&3===i&&(n=91)),n},InitMap:function(){var t=this,e="./map/"+this.GetMapURL();cc.loader.loadRes(e,cc.TiledMapAsset,function(e,i){e?cc.error("\ub9f5 \ub85c\ub529 \uc5d0\ub7ec: "+e):(t.gameMap.tmxAsset=i,t.MapSetupCamera())})},MapSetupCamera:function(){var t=this.gameMap.getMapSize(),e=this.gameMap.getTileSize(),i=t.height*e.height;this.gameMap.node.setPosition(0,3*-i),this._TileMapShake()},GetMapURL:function(){var t="",e=n.getInstance().getInitStageData(),i=(e.map,e.step),s=e.diff,a=e.level;if("tutorial"===i)t="map_T-"+a.toString();else{var o="Easy";switch(s){case"Easy":o="E";break;case"Normal":o="N";break;case"Hard":o="H"}t="map_"+i.toString()+"-"+o+"-"+a.toString()}return t},SetCamera:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5;this.camera.node.setPosition(cc.v3(t,e,0)),this.camera.zoomRatio=i},InitialCamera:function(){var t=n.getInstance().getInitStageData(),e=t.step,i=t.diff,s=t.level,a=this.ConvertGameLevel(e,i,s);switch(this.spaceShip.active=!1,console.log(a),a){case 0:case 1:this.SetCamera(-700,-870,1.4);break;case 2:case 3:case 5:case 6:this.SetCamera(-550,-1e3,1);break;case 8:case 9:this.SetCamera(-600,-970,1.2);break;case 4:case 7:case 10:this.SetCamera(-400,-1060,1);break;case 11:case 14:case 17:this.SetCamera(-300,-1200,.75);break;case 12:case 15:case 18:this.SetCamera(350,-1050,.7);break;case 13:case 16:case 19:this.SetCamera(650,-1e3,.58);break;case 20:case 23:case 26:this.SetCamera(140,-900,.8),this.spaceShip.setPosition(cc.v2(-4830,600)),this.spaceShip.active=!0;break;case 21:case 24:case 27:this.SetCamera(350,-900,.7),this.spaceShip.setPosition(cc.v2(-550,600)),this.spaceShip.active=!0;break;case 22:case 25:case 28:this.SetCamera(250,-1300,.7),this.spaceShip.setPosition(cc.v2(5260,-780)),this.spaceShip.active=!0;break;case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:this.SetCamera(-300,-850,.8);break;case 38:case 41:case 44:this.SetCamera(450,-800,.66);break;case 39:case 42:case 45:this.SetCamera(-200,-1050,.8);break;case 40:case 43:case 46:this.SetCamera(450,-1e3,.6);break;case 47:case 50:case 53:this.SetCamera(550,-950,.63);break;case 48:case 51:case 54:this.SetCamera(580,-650,.6);break;case 49:case 52:case 55:this.SetCamera(-400,-1050,.9);break;case 56:case 59:case 62:this.SetCamera(-400,-1050,1);break;case 57:case 60:case 63:this.SetCamera(250,-950,.8);break;case 58:case 61:case 64:this.SetCamera(-50,-1e3,1.1);break;case 65:case 68:case 71:this.SetCamera(-400,-1100,1);break;case 66:case 69:case 72:this.SetCamera(450,-700,.7);break;case 67:case 70:case 73:this.SetCamera(-200,-1350,.7);break;case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:this.SetCamera(250,-1050,.8);break;case 83:case 86:case 89:this.SetCamera(550,-850,.6);break;case 84:case 87:case 90:this.SetCamera(550,-900,.6);break;case 85:case 88:case 91:this.SetCamera(50,-1550,.6)}},EffectInit:function(){var t=this,e=[this.expList,this.hList,this.pList,this.dropEffectList];["/prefabs/explosion","/prefabs/heal","/prefabs/pickup","/prefabs/dropEffect"].forEach(function(i,n){for(var s=0;s<15;s++)cc.loader.loadRes(i,cc.Prefab,function(i,s){if(i)cc.error("\uc774\ubbf8\uc9c0 \ub85c\ub529 \uc5d0\ub7ec: "+i);else{var a=cc.instantiate(s);a.active=!1,t.effectParent.addChild(a),e[n].push(a)}})})},showEffect:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;e>=t.length-1&&(e=0);var a=t[e];a.active=!0,a.setPosition(i);var o=a.getComponent(cc.Animation);return o.once("finished",function(){a.active=!1,t[e]=a,s&&s(),e++},this),o.play(n),e},ShowExplosion:function(t){var e=this;this.expIdx=this.showEffect(this.expList,this.expIdx,t,"explosion",function(){e.isCameraShaked=!1,o.getInstance().PlaySfx(Env.SFX_BOMB)})},ShowHeal:function(t){this.hIdx=this.showEffect(this.hList,this.hIdx,t,"heal")},ShowPickup:function(t){this.pIdx=this.showEffect(this.pList,this.pIdx,t,"pickup",function(){o.getInstance().PlaySfx(Env.SFX_EARN_ITEM)})},ShowDropEffect:function(t){this.dropEffectIdx=this.showEffect(this.dropEffectList,this.dropEffectIdx,t,"dropeffect")},InitObject:function(){var t=n.getInstance().getInitStageData().goal_list;this.MakeGoal(t);var e=n.getInstance().getInitOjbectDatas();if(!(e.length<1)){for(var i=0;i<e.length;i++)this.MakeUpObject(e[i]),this.AddBombSprites(e[i]);this.ShowVariableBombSprites()}},MakeGoal:function(t){for(var e=0;e<t.length;e++)if("target"===t[e].goal){var i=t[e],n=cc.v2(i.pos[0],i.pos[1]);this.AddPrefabs(Env.GOAL,-1,n);break}},MakeUpObject:function(t){var e=t.type;if("laser"===e){var i=t.id,n=t.dir,s=t.pos_start[0],a=t.pos_start[1],o=t.status,r=cc.v2(s,a);this.AddLaserPrefab(Env.LASER_START_ON,i,r,o,n);var c=t.pos_end[0],h=t.pos_end[1],l=cc.v2(c,h);if(this.AddLaserPrefab(Env.LASER_END_ON,i,l,o,n),"h"===n)for(var _=s+1;_<c;_++){var p=cc.v2(_,a);this.AddLaserPrefab(Env.LASER_MIDDLE_ON,i,p,o,n)}else if("v"===n)for(_=a+1;_<h;_++){p=cc.v2(s,_);this.AddLaserPrefab(Env.LASER_MIDDLE_ON,i,p,o,n)}}else if("drop_switch"===e){var u=t.id,d=this.NameToTag(t.type),m=t.pos[0],E=t.pos[1],f=cc.v2(m,E),I=t.pos_drop[0],v=t.pos_drop[1],S=t.drop_type,g=this.NameToTag(S),b=cc.v2(I,v);this.AddDropSwitchPrefabs(d,u,f,g,b)}else{var A=this.NameToTag(t.type);if(-99==A)return void console.log(t.type);var y=t.pos[0],O=t.pos[1],L=t.id,N=cc.v2(y,O);o=t.status;A===Env.ROCKET_EMPTY?this.AddRocketParts(A,L,N,t):this.AddPrefabs(A,L,N,o,t)}},NameToTag:function(t){switch(t){case"food":return Env.FOOD;case"bomb":return Env.BOMB;case"rocket_parts":return Env.BATTERY;case"drop_switch":return Env.NORMAL_SWITCH_ON;case"laser_switch":return Env.LASER_SWITCH_ON;case"engines":case"solid_propellant":case"liquid_fuel":return Env.ROCKET_EMPTY;case"variation_switch":return Env.VARIATION_SWITCH_ON;case"door":return Env.DOOR_ON;case"medicine":return Env.MEDICINE;case"box":return Env.BOMB_BOX;default:return-99}},AddRocketParts:function(t,e,i,n){var s=this;cc.loader.loadRes("./prefabs/rocketParts",cc.Prefab,function(a,o){if(a)cc.error("Error loading image: "+a);else{var r=cc.instantiate(o);r.addComponent("Gobject"),r.getComponent("Gobject").Init(t,e);var c=s.GVector(i.x,i.y);switch(r.setPosition(c),n.require_dir){case"up":r.rotation=0;break;case"down":r.rotation=-180;break;case"left":r.rotation=-90;break;case"right":r.rotation=90}s.item.push(r),s.objectParent.addChild(r),s.objectParent.setLocalZOrder=10;performance.now(),s.startTime}})},AddPrefabs:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4?arguments[4]:void 0,a="",o=this;switch(t){case Env.FOOD:a="food";break;case Env.NORMAL_SWITCH_ON:case Env.NORMAL_SWITCH_OFF:a="nSwitch";break;case Env.LASER_SWITCH_ON:case Env.LASER_SWITCH_OFF:a="lSwitch";break;case Env.BATTERY:a="battery";break;case Env.BOMB:a="bomb";break;case Env.ROCKET_EMPTY:case Env.ROCKET_FILLED:a="rocketParts";break;case Env.GOAL:a="goal";break;case Env.FLOOR:a="floor";break;case Env.DOOR_ON:"v"===s.dir?a="door_v":"h"===s.dir&&(a="door");break;case Env.VARIATION_SWITCH_OFF:case Env.VARIATION_SWITCH_ON:a="variation_switch";break;case Env.MEDICINE:a="medicine";break;case Env.BOMB_BOX:a="bomb_box"}if(""!=a){var r="./prefabs/"+a;cc.loader.loadRes(r,cc.Prefab,function(a,r){if(a)cc.error("Error loading image: "+a);else{var c=cc.instantiate(r),h=o.GVector(i.x,i.y);c.setPosition(h),c.addComponent("Gobject"),c.getComponent("Gobject").Init(t,e),0==n&&(c.getComponent("Gobject").Show(),c.getComponent("Gobject").Hide()),t===Env.GOAL?(o.goalObject=c,o.node.addChild(c)):t===Env.DOOR_ON?("v"===s.dir?c.getComponent("Gobject").SetDir("v"):"h"===s.dir&&c.getComponent("Gobject").SetDir("h"),o.item.push(c),o.node.addChild(c)):(o.item.push(c),o.node.addChild(c))}})}else console.log("Not found Prefabs => "+t+" id => "+e)},createAndInitPrefab:function(t,e,i,n,s){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=this;cc.loader.loadRes(t,cc.Prefab,function(t,r){if(t)cc.error("\ud504\ub9ac\ud339 \ub85c\ub529 \uc5d0\ub7ec: "+t);else{var c=cc.instantiate(r);c.addComponent("Gobject"),c.getComponent("Gobject").Init(e,i),a&&c.getComponent("Gobject").DropItemHide(!0),c.setPosition(o.GVector(n.x,n.y)),o.node.addChild(c),s.push(c)}})},AddDropSwitchPrefabs:function(t,e,i,n,s){var a="./prefabs/food";n===Env.BATTERY?a="./prefabs/battery":n===Env.FOOD?a="./prefabs/food":n===Env.MEDICINE&&(a="./prefabs/medicine"),this.createAndInitPrefab("./prefabs/nSwitch",t,e,i,this.dropSwitchList),this.createAndInitPrefab(a,n,e,s,this.dropItemList,!0)},AddLaserPrefab:function(t,e,i,n,s){var a="laser",o=this;t===Env.LASER_MIDDLE_ON&&(a="laserMiddle");var r="./prefabs/"+a;cc.loader.loadRes(r,cc.Prefab,function(a,r){if(a)cc.error("Error loading image: "+a);else{var c=cc.instantiate(r);c.addComponent("Gobject"),c.getComponent("Gobject").Init(t,e);var h=!1;h=0!==n,c.getComponent("Gobject").LaserInitial(t,h,s);var l=o.GVector(i.x,i.y);c.setPosition(l),o.node.addChild(c),o.item.push(c);performance.now(),o.startTime}})},PrintUIDialog:function(t){if("3-1"!==n.getInstance().getInitStageData().step){var e=t.player.status;if(19===e){for(var i=t.item_list[0].print_array,s="",a=0;a<i.length;a++)s+=i[a]+" ";var o=s.toString();this.ShowPrintUI(o)}else 0!=e&&this._InitPrintUI()}},executeCommand:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=n.getInstance().getCommandLine(t);if(-1===e)return!1;if(1===e.status)return!1;this.ObjectUpdate(e.item_list),this.UpdateMonster(e.item_list);var i=e.player.status;this.PrintUIDialog(e);var s=this.GVector(e.player.pos[0],e.player.pos[1]);this.EffectControl(i,s),0==t&&(console.log("init"),this.bossObject.getComponent("Boss").HideSpecialAttack());var a=e.player.hit_status;return 2===a&&this.bossObject.getComponent("Boss").SpecialAttack(),1==a&&e.player.hp>1?this.player.getComponent("Player").SetHitStatus():(this.player.getComponent("Player").setDirection(e.player.dir),this.player.getComponent("Player").setPlayerStatus(i),this.player.getComponent("Player").Movement(s)),this.UpdateBoss(e.item_list),!0},EffectControl:function(t,e){11===t?(this.ShakeEffect(),this.ShowExplosion(e)):3!==t&&37!==t||this.ShowPickup(e)},ObjectUpdate:function(t){if(!(t.length<1))for(var e=0;e<t.length;e++)this.ItemStatusUpdate(e,t[e]),this.DropSwitchUpdate(e,t[e])},DropSwitchUpdate:function(t,e){for(var i=0;i<this.dropSwitchList.length;i++){var n=this.dropSwitchList[i].getComponent("Gobject"),s=n.GetItemID();if(s===t&&0===e){var a=(o=this.FindDropItem(s)).getComponent("Gobject");!1===o.active&&this.ShowDropEffect(o.position),a.DropItemShow(),n.Hide()}else if(s===t&&1===e){(a=(o=this.FindDropItem(s)).getComponent("Gobject")).DropItemHide(),n.Hide()}else if(s===t&&2===e){(a=(o=this.FindDropItem(s)).getComponent("Gobject")).DropItemShow(),n.Show()}else if(s===t&&3===e){var o;(a=(o=this.FindDropItem(s)).getComponent("Gobject")).DropItemHide(),n.Show()}}},FindDropItem:function(t){for(var e=0;e<this.dropItemList.length;e++)if(this.dropItemList[e].getComponent("Gobject").GetItemID()===t)return this.dropItemList[e]},_InitPrintUI:function(){this.print_ui_object.active=!1,this.print_ui_object.scale=cc.v2(1,0),this.print_ui_label.string=""},_OpenPrintUI:function(){this.print_ui_object.active||(this.print_ui_object.active=!0,this.print_ui_object.getComponent(cc.Animation).play("open"))},ShowPrintUI:function(t){this._OpenPrintUI(),this.print_ui_label.string=t},ShowVariableBombSprites:function(){var t=this;setInterval(function(){n.getInstance().getCurrentCommandID()>2?t._HideVariableSprites():t._ShowVariableSprites()},30)},AddBombSprites:function(t){if(this.NameToTag(t.type)===Env.BOMB){var e=t.variation_no;if(null!=e){var i=t.pos[0],n=t.pos[1],s=cc.v2(i,n),a=this;cc.loader.loadRes("./prefabs/var_bomb",cc.Prefab,function(t,i){if(t)cc.error("Error loading image: "+t);else{var n=cc.instantiate(i);n.opacity=0;var o=a.GVector(s.x,s.y);if(n.setPosition(o),a.bomb_sprite_max_range=a.bomb_sprite_max_range>e[0]?a.bomb_sprite_max_range:e[0],1==e.length)switch(e[0]){case 1:a.bomb_sprites[0].push(n);break;case 2:a.bomb_sprites[1].push(n);break;case 3:a.bomb_sprites[2].push(n);break;case 4:a.bomb_sprites[3].push(n);break;case 5:a.bomb_sprites[4].push(n)}else for(var r=0;r<e.length;r++)switch(e[r]){case 1:a.bomb_sprites[0].push(n);break;case 2:a.bomb_sprites[1].push(n);break;case 3:a.bomb_sprites[2].push(n);break;case 4:a.bomb_sprites[3].push(n);break;case 5:a.bomb_sprites[4].push(n)}a.node.addChild(n)}})}}},_HideVariableSprites:function(){if(!1!==this.isShowVariation){this.isShowVariation=!1,clearInterval(this.bomb_sprite_id);for(var t=0;t<this.bomb_sprites.length;t++)for(var e=0;e<this.bomb_sprites[t].length;e++)this.bomb_sprites[t][e].opacity=0,this.bomb_sprites[t][e].active=!1}},_ShowVariableSprites:function(){if(!this.isShowVariation){this.isShowVariation=!0;var t=0,e=[0,0,0,0,0,0,0],i=this;this.bomb_sprite_id=setInterval(function(){if(e[t]>250){e[t]=0;for(var n=0;n<i.bomb_sprites[t].length;n++)i.bomb_sprites[t][n].opacity=0;t>=i.bomb_sprite_max_range-1?t=0:t++}else for(n=0;n<i.bomb_sprites[t].length;n++)i.bomb_sprites[t][n].opacity=e[t],e[t]+=3},90)}},ItemStatusUpdate:function(t,e){for(var i=0;i<this.item.length;i++){var n=this.item[i].getComponent("Gobject"),s=n.GetItemID();n.GetItemTag();s===t&&0===e?n.Hide():n.GetItemID()===t&&1===e&&n.Show()}},OnCodePlay:function(){if(!this.isPlay){var t=this;this.isPlay=!0,this.idx=n.getInstance().GetProgressId();var e=setInterval(function(){if(n.getInstance().isGamePause){var i=n.getInstance().GetProgressId();t.idx=i}else t.player.getComponent("Player").ResetInint(),!1===t.executeCommand(t.idx)&&(t.ResetDetector(),clearInterval(e),t.isPlay=!1,n.getInstance().SetStatus(!1)),t.idx++},1e3/60)}},ResetDetector:function(){var t=this,e=setInterval(function(){-1===n.getInstance().getCommandLine(t.idx)&&n.getInstance().isGameReset&&(t.executeCommand(0),t.player.getComponent("Player").ResetPlayer(),t.OnCodePlay(),clearInterval(e))},1e3/60)}}),cc._RF.pop()},{"../Controller":"Controller","./Loader":"Loader","./SoundManager":"SoundManager"}],Gobject:[function(t,e,i){"use strict";cc._RF.push(e,"e58f19MSUlGgK4r9ykmwmrh","Gobject");t("../Controller");var n=t("../GameLogic/Loader"),s=t("../GameLogic/SoundManager");cc.Class({extends:cc.Component,properties:{itemId:0,itemTAG:0,isStatusChange:!1,laser_direction:"h"},Init:function(t,e){this.ChangeSprite(t),this.itemId=e,this.itemTAG=t,this.isStatusChange=!0,t===Env.GOAL&&this.node.getComponent(cc.Animation).play("goal")},GetItemTag:function(){return this.itemTAG},GetItemID:function(){return this.itemId},LaserInitial:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.laser_direction=i,"h"===i?e?t===Env.LASER_START_ON?this.ChangeSprite(Env.LASER_START_ON):t===Env.LASER_MIDDLE_ON?(this.node.active=!0,this.ChangeSprite(Env.LASER_MIDDLE_ON)):t===Env.LASER_END_ON&&this.ChangeSprite(Env.LASER_END_ON):(this.isStatusChange=!0,t===Env.LASER_START_ON?this.ChangeSprite(Env.LASER_START_OFF):t===Env.LASER_MIDDLE_ON?this.node.active=!1:t===Env.LASER_END_ON&&this.ChangeSprite(Env.LASER_END_OFF)):e?t===Env.LASER_START_ON?this.ChangeSprite(Env.VLASER_START_ON):t===Env.LASER_MIDDLE_ON?(this.node.active=!0,this.ChangeSprite(Env.VLASER_MIDDLE_ON)):t===Env.LASER_END_ON&&(this.node.active=!0,this.ChangeSprite(Env.VLASER_END_ON)):(this.isStatusChange=!0,t===Env.LASER_START_ON?this.ChangeSprite(Env.VLASER_START_OFF):t===Env.LASER_MIDDLE_ON?this.node.active=!1:t===Env.LASER_END_ON&&(this.node.active=!1))},Hide:function(){if(!1!==this.isStatusChange)if(this.isStatusChange=!1,this.itemTAG===Env.LASER_START_ON)"h"===this.laser_direction?this.ChangeSprite(Env.LASER_START_OFF):this.ChangeSprite(Env.VLASER_START_OFF);else if(this.itemTAG===Env.LASER_END_ON)"h"===this.laser_direction?this.ChangeSprite(Env.LASER_END_OFF):this.node.active=!1;else if(this.itemTAG===Env.LASER_SWITCH_ON)s.getInstance().PlaySfx(Env.SFX_LASER_BUTTON),this.ChangeSprite(Env.LASER_SWITCH_OFF);else if(this.itemTAG===Env.ROCKET_EMPTY)this.ChangeSprite(Env.ROCKET_EMPTY);else if(this.itemTAG===Env.NORMAL_SWITCH_ON)this.ChangeSprite(Env.NORMAL_SWITCH_OFF);else if(this.itemTAG===Env.VARIATION_SWITCH_ON)this.ChangeSprite(Env.VARIATION_SWITCH_OFF);else{if(!1===this.node.active)return;this.node.active=!1}},SetDir:function(t){"h"==t?this.ChangeSprite(Env.DOOR_ON):"v"==t&&this.ChangeSprite(Env.DOOR_OFF)},Show:function(){if(!this.isStatusChange)if(this.isStatusChange=!0,this.itemTAG===Env.LASER_START_ON)"h"===this.laser_direction?this.ChangeSprite(Env.LASER_START_ON):this.ChangeSprite(Env.VLASER_START_ON);else if(this.itemTAG===Env.LASER_END_ON)"h"===this.laser_direction?this.ChangeSprite(Env.LASER_END_ON):(this.node.active=!0,this.ChangeSprite(Env.VLASER_MIDDLE_ON));else if(this.itemTAG===Env.LASER_MIDDLE_ON)console.log("Laser \ub4e4\uc5b4\uc634"),this.node.active=!0,"h"===this.laser_direction?this.ChangeSprite(Env.LASER_MIDDLE_ON):this.ChangeSprite(Env.VLASER_MIDDLE_ON);else if(this.itemTAG===Env.LASER_SWITCH_ON)this.ChangeSprite(Env.LASER_SWITCH_ON);else if(this.itemTAG===Env.ROCKET_EMPTY)this.ChangeSprite(Env.ROCKET_FILLED),s.getInstance().PlaySfx(Env.SFX_PARTS_DOCKING),this.ShowProofEffect();else if(this.itemTAG===Env.VARIATION_SWITCH_OFF)this.ChangeSprite(Env.VARIATION_SWITCH_ON);else if(this.itemTAG===Env.NORMAL_SWITCH_ON)s.getInstance().PlaySfx(Env.SFX_DROP_SWITCH),this.ChangeSprite(Env.NORMAL_SWITCH_ON);else{if(!0===this.node.active)return;this.node.active=!0}},DropItemShow:function(){!0!==this.node.active&&(s.getInstance().PlaySfx(Env.SFX_DROP_ITEM),this.node.active=!0)},DropItemHide:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!1!==this.node.active&&(t||s.getInstance().PlaySfx(Env.SFX_EARN_ITEM),this.node.active=!1)},ShowProofEffect:function(){var t=this.node.getChildByName("proof");t.active=!0;var e=t.getComponent(cc.Animation);e.on("finished",function(){t.active=!1},this),e.play("proof")},ChangeSprite:function(t){this.node.getComponent(cc.Sprite).spriteFrame=n.getInstance().GetImage(t)}});cc._RF.pop()},{"../Controller":"Controller","../GameLogic/Loader":"Loader","../GameLogic/SoundManager":"SoundManager"}],Loader:[function(t,e,i){"use strict";cc._RF.push(e,"5b28f8Sy3hCNK12RzDq3AFJ","Loader");var n=cc.Class({extends:cc.Component,statics:{_instance:null,getInstance:function(){return n._instance||(n._instance=new n,n._instance.init()),n._instance}},properties:{initStatus:!1,spr:[]},init:function(){this._LoadImage()},_LoadImage:function(){var t=this;return!this.initStatus&&(this.initStatus=!0,this.spr=new Array(Env.MAX_LOAD_IMAGE_LENGTH).fill(null),cc.loader.loadRes(Env.DIRECTORY_PATH+"atlas",cc.SpriteAtlas,function(e,i){if(e)console.error("Failed to load atlas:",e);else for(var n=[Env.FOOD_BOX_FILE_NAME,Env.N_SWITCH_ON_FILE_NAME,Env.N_SWITCH_OFF_FILE_NAME,Env.L_SWITCH_ON_FILE_NAME,Env.L_SWITCH_OFF_FILE_NAME,Env.BATTERY_FILE_NAME,Env.BOMB_FILE_NAME,Env.ROCKET_EMPTY_FILE_NAME,Env.ROCKET_FILLED_FILE_NAME,Env.L_START_ON_FILE_NAME,Env.L_MIDDLE_FILE_NAME,Env.L_END_ON_FILE_NAME,Env.L_START_OFF_FILE_NAME,Env.L_END_OFF_FILE_NAME,Env.GOAL_FILE_NAME,Env.VL_START_ON_FILE_NAME,Env.VL_MIDDLE_ON_FILE_NAME,Env.VL_END_ON_FILE_NAME,Env.VL_START_OFF_FILE_NAME,Env.DOOR_ON_FILE,Env.DOOR_OFF_FILE,Env.VARIATION_SWITCH_ON_FILE,Env.VARIATION_SWITCH_OFF_FILE,Env.MEDICINE_FILE,Env.BOMB_BOX_FILE],s=0;s<n.length;s++){var a=i.getSpriteFrame(n[s]);a?t.spr[s]=a:console.error("Missing sprite frame for:",n[s])}}),!0)},GetImage:function(t){return t>=0&&t<this.spr.length?this.spr[t]:(console.warn("Invalid tag: "+t+"; Index should be between 0 and "+(this.spr.length-1)),null)}});cc._RF.pop()},{}],MainScene:[function(t,e,i){"use strict";cc._RF.push(e,"f9005BXbBNEYpWG4tPKUQe1","MainScene");var n=t("../Controller");cc.Class({extends:cc.Component,properties:{particle_1:cc.Node,partileFire:{default:[],type:[cc.Node]},movingTarget:cc.Node,spaceShip:cc.Node,objectCamera:cc.Camera,miniGameLayout:cc.Node,errorPange:cc.Node,phaseLeftParent:cc.Node,phaseLeftParent2:cc.Node,phase1Nodes:{default:[],type:[cc.Node]},phase1Object:cc.Node,energy_img:{default:[],type:[cc.SpriteFrame]},rocket_energy:{default:[],type:[cc.SpriteFrame]},phase2Nodes:{default:[],type:[cc.Node]},phase2EnergyFrame:cc.Node,phase2EnergyEmptyObject:cc.Node,phase2EnergyFillObject:cc.Node,phase2Object:cc.Node,limitLeftObject:cc.Node,limitRightObject:cc.Node,sliderBar:cc.Slider,targetObject:cc.Node,phase1StopBtn:cc.Button,phase2StopBtn:cc.Button,isDegreeReverse:!1,isProgressReverse:!1,isStopDegree:!1,isStopProgress:!1,degree:90,progressValue:0,dialog:[],dialongIndex:0,popupObject:cc.Node,popupLabel:cc.Label,popupBtn:cc.Button,status:0,phase2Level:0,levelVector:[],leftLimit:.3,rightLimit:.7,levelStatus:[]},start:function(){n.getInstance().finalIndex=!0,this.particle_1.active=!1,this.partileFire[0].active=!1,this.partileFire[1].active=!1,this.levelStatus=[!1,!1,!1],this.levelVector=[cc.v2(-90,90),cc.v2(-45,90),cc.v2(-90,0)],this.dialog=["\ubaa8\ub4e0 \uc900\ube44\uac00 \ub05d\ub0ac\uc2b5\ub2c8\ub2e4. \ubc1c\uc0ac\uac01\ub3c4\ub97c \uc870\uc815\ud558\uace0, \uc5f0\ub8cc\ub97c \uc8fc\uc785\ud574\uc8fc\uc138\uc694."],this.AddEvent(),this.GameUpdator()},SpaceShipUpdator:function(){var t=this;if(1==this.status){this.spaceShip.active=!1;var e=cc.rotateTo(.8,0),i=cc.delayTime(.5),n=cc.fadeOut(.5),s=cc.callFunc(function(){t.spaceShip.active=!0;var e=cc.v2(0,-80),i=cc.moveTo(.5,e);t.objectCamera.node.runAction(i)},this),a=cc.spawn(n,s),o=cc.callFunc(function(){t.ShowPopupMessage("\ubc1c\uc0ac\uccb4\uc5d0 \uc5f0\ub8cc \uc8fc\uc785\ud558\uae30 (3\ud68c)")},this),r=cc.sequence(e,i,a,o);this.movingTarget.runAction(r)}else if(3==this.status){var c=cc.v2(0,-250),h=cc.moveTo(.5,c),l=cc.callFunc(function(){t.objectCamera.zoomRatio=2,t.partileFire[0].active=!0,t.partileFire[1].active=!0}),_=cc.spawn(l,h),p=cc.callFunc(function(){t.ShakeObject(t.objectCamera.node,!1)}),u=cc.v2(0,1500),d=cc.moveTo(.5,u),m=cc.callFunc(function(){t.objectCamera.node.runAction(d)}),E=cc.delayTime(.1),f=cc.spawn(p,E),I=cc.repeat(f,80),v=cc.sequence(_,I,m);this.objectCamera.node.runAction(v);var S=[cc.v2(-5,-400),cc.v2(-5,200),cc.v2(-5,600),cc.v2(-5,1e3),cc.v2(-5,2500)],g=cc.moveTo(4,S[0]),b=cc.moveTo(3,S[1]),A=cc.moveTo(1,S[2]),y=cc.moveTo(1,S[3]),O=cc.moveTo(5,S[4]),L=cc.delayTime(.2),N=cc.callFunc(function(){t.particle_1.active=!0}),T=cc.callFunc(function(){t.particle_1.active=!1}),R=cc.spawn(L,N),C=cc.spawn(T,A),P=cc.callFunc(function(){t.status=10,t.ShowPopupMessage("\ubbf8\uc158 \uc131\uacf5! \uc6b0\uc8fc\uc5d0\uc11c \uc0c8\ub85c\uc6b4 \ubaa8\ud5d8\uc744 \ub5a0\ub098\uc138\uc694!")});v=cc.sequence(R,g,b,C,y,O,P);this.spaceShip.runAction(v)}},GetPhase2LevelUpdate:function(){if(!(this.phase2Level>=3)){switch(this.phase2Level){case 0:this.leftLimit=.3,this.rightLimit=.7;break;case 1:this.leftLimit=.4,this.rightLimit=.7;break;case 2:case 3:this.leftLimit=.3,this.rightLimit=.4}this.limitLeftObject.position=cc.v2(this.levelVector[this.phase2Level].x,0),this.limitRightObject.position=cc.v2(this.levelVector[this.phase2Level].y,0)}},onLoad:function(){this.InitUI()},GameUpdator:function(){this.ShowMessageBox(0)},InitUI:function(){this.miniGameLayout.active=!1,this.phase1Object.active=!1,this.phase2Object.active=!1},AddEvent:function(){this.sliderBar.interactable=!1,this.phase1StopBtn.node.on("click",this.Phase1StopAction,this),this.phase2StopBtn.node.on("click",this.Phase2StopAction,this),this.popupBtn.node.on("click",this.AcceptButtonAction,this)},HidePhase1Pannel:function(){this.phase1Object.active=!1,this.phaseLeftParent.active=!1},ShowPhase1LeftPannel:function(){var t=this;this.phaseLeftParent2.active=!1,this.phaseLeftParent.active=!0;var e=this.phase1Nodes.length,i=this;this.phase1Nodes.forEach(function(n,s){n.opacity=0;var a=cc.delayTime(.2*s),o=cc.fadeIn(.8),r=cc.callFunc(function(){if(s===e-1){var n=i.phase1Nodes[i.phase1Nodes.length-1],a=cc.fadeOut(.2),o=cc.delayTime(.1),r=cc.fadeIn(.2),c=cc.sequence(a,o,r),h=cc.repeat(c,2);n.runAction(h),t.Phase1RightPannel()}}),c=cc.sequence(a,o,r);n.runAction(c)})},Phase1RightPannel:function(){var t=this;this.phase1Object.active=!0,this.phase1StopBtn.node.active=!1,this.phase1Object.scale=cc.v2(0,0);var e=cc.scaleTo(.5,1,1),i=cc.delayTime(.8),n=cc.callFunc(function(){t.status=2,t.ShowPopupMessage("\ubc1c\uc0ac\uac01\ub3c4\ub97c 90\ub3c4\ub85c \uc870\uc815\ud574\uc8fc\uc138\uc694!"),t.DegreeGameStart()},this,"Hello World"),s=cc.sequence(e,i,n);this.phase1Object.runAction(s)},LaunchDegree:function(){this.phase2Object.active=!1,this.ShowPhase1LeftPannel(),this.HidePhase2Pannel()},HidePhase2Pannel:function(){this.phase2Object.active=!1},FilledOiled:function(t){var e=null;if(0==this.levelStatus[t]){switch(this.levelStatus[t]=!0,t){case 0:e=this.phase2Nodes[5];break;case 1:e=this.phase2Nodes[6];break;case 2:e=this.phase2Nodes[7]}e.getComponents(cc.Sprite).spriteFrame=this.rocket_energy[1],this.EnergyVisualize(t)}},EnergyVisualize:function(t){var e=[0,0],i=null;switch(t){case 0:e=[.5,.3],i=this.phase2Nodes[5].getComponent(cc.Sprite);break;case 1:e=[1,.5],i=this.phase2Nodes[6].getComponent(cc.Sprite);break;case 2:e=[1,1],i=this.phase2Nodes[7].getComponent(cc.Sprite)}i.spriteFrame=this.rocket_energy[1],this.updateSpriteFillRange(this.phase2EnergyEmptyObject.getComponent(cc.Sprite),e[0]),this.updateSpriteFillRange(this.phase2EnergyFillObject.getComponent(cc.Sprite),e[1])},updateSpriteFillRange:function(t,e){var i=setInterval(function(){t.fillRange>=e?(t.fillRange=e,clearInterval(i)):t.fillRange+=.01},5)},ShowPhase2LeftPannel:function(){var t=this;this.phaseLeftParent2.active=!0,this.phase2Object.active=!1,this.phase2Object.opacity=0;var e=this.phase2Nodes.length,i=this;this.limitLeftObject.active=!1,this.limitRightObject.active=!1,this.phase2Nodes.forEach(function(n,s){n.opacity=0;var a=cc.delayTime(.2*s),o=cc.fadeIn(.5),r=cc.callFunc(function(){if(s===e-1){var n=t.phase2Nodes[t.phase2Nodes.length-1],a=cc.fadeOut(.2),o=cc.delayTime(.1),r=cc.fadeIn(.2),c=cc.sequence(a,o,r),h=cc.repeat(c,2);n.runAction(h);var l=t.phase2EnergyFrame.getComponent(cc.Sprite);l.fillRange=0;var _=setInterval(function(){l.fillRange>=1?(clearInterval(_),i.Phase2RightPannel()):l.fillRange+=.1},15)}}),c=cc.sequence(a,o,r);n.runAction(c)})},Phase2RightPannel:function(){var t=this;this.phase2Object.active=!0,this.phase2StopBtn.node.active=!1;var e=cc.fadeIn(.8),i=cc.delayTime(.5);this.limitLeftObject.active=!0,this.limitRightObject.active=!0;var n=cc.callFunc(function(){t.status=4,t.ShowPopupMessage("\uc911\uc559 \uac8c\uc774\uc9c0\ubc14\uc5d0 \ud0c0\uc774\ubc0d\uc5d0 \ub9de\ucdb0 \uc5f0\ub8cc\ub97c \uc8fc\uc785\ud574\uc8fc\uc138\uc694.")}),s=cc.sequence(i,e,i,n);this.phase2Object.runAction(s)},LaunchBoost:function(){this.HidePhase1Pannel(),this.ShowPhase2LeftPannel(),this.phase2Object.active=!0},typeText:function(t,e,i){t.string="";var n=0;(function s(){n<e.length?(t.string+=e.charAt(n),n++,setTimeout(s,30)):i&&i()})()},ShowMessageBox:function(t){var e=this;this.popupObject.active=!0,this.popupBtn.node.active=!1,this.popupObject.scale=cc.v2(1,0);var i=cc.scaleTo(.5,1,1),n=cc.callFunc(function(){var i=e.dialog[t];e.typeText(e.popupLabel,i,e.CallTypingEnd.bind(e))}),s=cc.sequence(i,n);this.popupObject.runAction(s)},ShowPopupMessage:function(t){var e=this;this.popupLabel.string="",this.popupObject.active=!0,this.popupBtn.node.active=!1,this.popupObject.scale=cc.v2(1,0);var i=cc.scaleTo(.5,1,1),n=cc.callFunc(function(){e.typeText(e.popupLabel,t,e.CallTypingEnd.bind(e))}),s=cc.sequence(i,n);this.popupObject.runAction(s)},CallTypingEnd:function(){this.popupBtn.node.active=!0;var t=cc.scaleTo(.3,1.05,1.05),e=cc.scaleTo(.3,.95,.95),i=cc.sequence(t,e),n=cc.repeatForever(i);this.popupBtn.node.getChildByName("Background").getChildByName("Label").runAction(n)},AcceptButtonAction:function(){if(this.popupObject.active=!1,this.dialongIndex>=this.dialog.length-1)4===this.status?(this.phase2StopBtn.node.active=!0,this.ProgresGameStart()):3===this.status?(this.SpaceShipUpdator(),this.miniGameLayout.active=!1):2===this.status?this.phase1StopBtn.node.active=!0:1===this.status?(this.miniGameLayout.active=!0,this.LaunchBoost()):0===this.status?(this.miniGameLayout.active=!0,this.LaunchDegree()):10===this.status&&(n.getInstance().minigameDone=!0);else{this.dialongIndex++;var t=this;setTimeout(function(){t.ShowMessageBox(t.dialongIndex)},1e3)}},ShakeObject:function(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],s=t.position;i&&(this.errorPange.active=!0);for(var a=0;a<4;a++){var o=2*(Math.random()-.5)*15.2,r=2*(Math.random()-.5)*15.2,c=cc.delayTime(.02),h=cc.moveBy(.02,cc.v2(o,r)),l=cc.moveBy(.02,cc.v2(-o,-r));n.push(c,h,l)}var _=cc.callFunc(function(){e.errorPange.active=!1,t.position=s}),p=cc.sequence(n[0],n[1],n[2],n[3],_);t.runAction(p)},Phase1StopAction:function(){this.degree<=5?(this.status=1,this.StopDegreeLooper(),this.SpaceShipUpdator(),this.phase1StopBtn.node.active=!1,this.phaseLeftParent.active=!1,this.phase1Object.active=!1):this.ShakeObject(this.phase1Object)},Phase2StopAction:function(){this.progressValue>=this.leftLimit&&this.progressValue<=this.rightLimit?2==this.phase2Level?(this.FilledOiled(this.phase2Level),this.StopProgressLooper(),this.progressValue=.4,this.ShowPopupMessage("\uc131\uacf5\ud558\uc600\uc2b5\ub2c8\ub2e4! \ubc1c\uc0ac\uac00 \uace7 \uc2dc\uc791\ub429\ub2c8\ub2e4."),this.status=3,this.phase2StopBtn.node.active=!1):(this.FilledOiled(this.phase2Level),this.phase2Level++,this.progressValue=0):this.ShakeObject(this.phase2Object)},StopDegreeLooper:function(){this.isStopDegree=!0},StopProgressLooper:function(){this.isStopProgress=!0},ProgresGameStart:function(){var t=this,e=setInterval(function(){t.GetPhase2LevelUpdate(),t.isStopProgress&&clearInterval(e),t.isProgressReverse?t.DecreaseProgress():t.IncreaseProgress(),t.sliderBar.progress=t.progressValue},15)},IncreaseProgress:function(){this.progressValue>=1?this.isProgressReverse=!0:0==this.phase2Level?this.progressValue+=.005:1==this.phase2Level?this.progressValue+=.01:this.progressValue+=.02},DecreaseProgress:function(){this.progressValue<=0?this.isProgressReverse=!1:0===this.phase2Level?this.progressValue-=.005:1===this.phase2Level?this.progressValue-=.01:this.progressValue-=.02},DegreeGameStart:function(){var t=this,e=setInterval(function(){t.isStopDegree&&clearInterval(e),t.isDegreeReverse?t.DecreaseDegree():t.IncreaseDegree(),t.targetObject.angle=t.degree},5)},IncreaseDegree:function(){this.degree>=90?this.isDegreeReverse=!0:this.degree+=.7},DecreaseDegree:function(){this.degree<=0?this.isDegreeReverse=!1:this.degree-=.5}}),cc._RF.pop()},{"../Controller":"Controller"}],Monster:[function(t,e,i){"use strict";cc._RF.push(e,"268ee8RgQ9ONZR8x927jAb0","Monster");t("Controller");cc.Class({extends:cc.Component,properties:{aniArray:{default:[]},monster_type:0,id:0,direction:"",status:"",init_position:null,init_json_data:null,monster_number:0,isDead:!1,deadIntevalID:null,timout:null,explosionPrefabs:cc.Node,monsterNameTack:cc.Node,nameLabel:cc.Label,hpBar:cc.ProgressBar,barBackground:cc.Node,maxHP:0},start:function(){this.aniArray=[["idle_left_red","idle_right_red","hit_left_red","hit_right_red","atk_left_red","atk_right_red","r_atk_left_red","r_atk_right_red"],["idle_left_yel","idle_right_yel","hit_left_yel","hit_right_yel","atk_left_yel","atk_right_yel","r_atk_left_yel","r_atk_right_yel"]]},GetID:function(){return this.id},InitMonster:function(t,e){this.init_position=e,this.id=t.id,this.init_json_data=t,"aggressive_monster_2"===t.type?(this._SetMonsterAnimation(0,0),this.monster_number=0,this.direction=2,this.monster_type=2,1==t.is_name_open?this.monsterNameTack.active=!0:this.monsterNameTack.active=!1,this.nameLabel.string=t.name,this.maxHP=t.hp):"passive_monster"===t.type?("left"===t.dir?(this._SetMonsterAnimation(1,0),this.direction=0):"right"===t.dir&&(this._SetMonsterAnimation(1,1),this.direction=1),this.monster_number=1,this.monster_type=0):"aggressive_monster_1"==t.type&&(this._SetMonsterAnimation(1,0),this.direction=2,this.monster_number=1,this.monster_type=1),this.InitDeadStatus()},ShowExplosion:function(){this.explosionPrefabs.getComponent(cc.Animation).play("explosion")},UpdateStatus:function(t){if("number"!=typeof t)switch(this._UpdateHP(t.hp),t.status){case-10:this.InitDeadStatus();break;case-1:this.node.opacity=255;var e=0;1===this.direction&&(e=1),this._SetMonsterAnimation(this.monster_number,e);break;case-6:if(1==this.monster_type)console.log("ATK_AGG_1");else if(2===this.monster_type){e=6;"right"===t.dir&&(e=7),this._SetMonsterAnimation(this.monster_number,e)}break;case-9:this.Movement(this.init_position);e=0;1===this.direction&&(e=1),this._SetMonsterAnimation(this.monster_number,e),this.InitDeadStatus()}else switch(t){case-10:this.InitDeadStatus();break;case 1:e=6;1===this.direction&&(e=7),this._SetMonsterAnimation(this.monster_number,e);break;case-1:this.node.opacity=255;e=0;1===this.direction&&(e=1),this._SetMonsterAnimation(this.monster_number,e);break;case-3:e=2;1===this.direction&&(e=3),this._SetMonsterAnimation(this.monster_number,e);break;case-2:console.log("PRINT_ERROR");break;case-6:case-11:if(0==this.monster_type){e=5;1===this.direction&&(e=4),this._SetMonsterAnimation(this.monster_number,e)}else if(2===this.monster_type){e=6;1===this.direction&&(e=7),this._SetMonsterAnimation(this.monster_number,e)}else{e=4;1===this.direction&&(e=5),this._SetMonsterAnimation(this.monster_number,e)}break;case-9:e=0;1===this.direction&&(e=1),this._SetMonsterAnimation(this.monster_number,e);break;case 1:break;case-8:if(this.IsDeadMonster())break;this.MonsterDeadAnimation()}},InitDeadStatus:function(){this.isDead=!1,this.node.opacity=255,clearInterval(this.deadIntevalID),clearInterval(this.timout),console.log("INIT"),this.Movement(this.init_position,this.direction),2===this.monster_type?(1===this.init_json_data.is_name_open?this.monsterNameTack.active=!0:this.monsterNameTack.active=!1,this._InitHP()):(this.hpBar.active=!1,this.monsterNameTack.active=!1)},IsDeadMonster:function(){return this.isDead},Movement:function(t,e){var i=0;"right"==e&&(i=1),this._SetMonsterAnimation(this.monster_number,i),this.node.setPosition(t)},convertToAnimationNumber:function(t){switch(t){case-1:return 0}return 0},_SetMonsterAnimation:function(t,e){var i=this.getComponent(cc.Animation),n=this.aniArray[t][e];i.getAnimationState(n).isPlaying||i.play(n)},_UpdateHP:function(t){2===this.monster_type&&(this.hpBar.progress=t/this.maxHP,this.hpBar.progress>.6?this.barBackground.color=new cc.Color(0,255,0):this.barBackground.color=new cc.Color(255,0,0))},_InitHP:function(){this.hpBar.progress=this.maxHP,this.barBackground.color=new cc.Color(0,255,0)},MonsterDeadAnimation:function(){if(!this.isDead){this.isDead=!0,1===this.direction?this._SetMonsterAnimation(this.monster_number,3):this._SetMonsterAnimation(this.monster_number,2);var t=this;this.timout=setTimeout(function(){t.deadIntervalID=setInterval(function(){t.node.opacity-=9,t.node.opacity<1&&clearInterval(t.deadIntervalID)},30)},300)}}}),cc._RF.pop()},{Controller:"Controller"}],ObjectLaiser:[function(t,e,i){"use strict";cc._RF.push(e,"edf33C2fGZLeKAKOApy4JPm","ObjectLaiser");var n=t("./Gobject");cc.Class({extends:n,properties:{number:0},Init:function(t,e){this._super(t),this.number=e}});cc._RF.pop()},{"./Gobject":"Gobject"}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"46be6eeiGlMCpDkX0lZkvE+","Player");var n=t("Controller");cc.Class({extends:cc.Component,properties:{initPosition:null,direction:Env.DIRECTION_UP,bubble:cc.Node,bubbleLabel:cc.Label,isShowMessage:!1,playerIsDead:!1,playerStatusInfo:0,audioFootStep:{default:[],type:cc.AudioClip},audioStep:0,isPlaySound:!1,isBombAnimation:!1,isResetStatus:!1,aniArray:{default:[]},isRunningDetector:!1,mdID:null,healParticle:cc.ParticleSystem,deadIntevalID:null,chargeShotParticle:cc.Node,chargeShotBot:cc.Node},start:function(){this.aniArray=[["idle_left_m","idle_right_m","idle_up_m","idle_down_m","run_left","run_right","run_up","run_down","hit_l_m","hit_r_m","","","","","","",""],["idle_left_mh","idle_right_mh","idle_up_mh","idle_down_mh","run_left_mh","rum_right_mh","rum_up_mh","run_down_mh","hit_left_mh","hit_right_mh","atk_left_mh","atk_right_mh","jump_left_mh","jump_right_mh","jump_up_mh","jump_down_mh","charge_shot_mh"],["idle_left_w","idle_right_w","idle_up_w","idle_down_w","run_left_w","run_right_w","run_up_w","run_down_w","hit_left_w","hit_right_w","","","","","","",""],["left_idle_wh","right_idle_wh","idle_back_wh","idle_front_wh","leftRun_wh","rightRun_wh","upRun_wh","downRun_wh","hit_left_wh","hit_right_wh","attack_left_wh","attack_right_wh","jump_left_wh","jump_right_wh","jump_up_wh","jump_down_wh","charge_shot_wh"]]},ResetInint:function(){this.isResetStatus=!1},ResetPlayer:function(){this.isResetStatus||(this.isResetStatus=!0,this.direction===Env.DIRECTION_LEFT?this.ForcePlayerAnimation(0):this.direction===Env.DIRECTION_RIGHT?this.ForcePlayerAnimation(1):this.direction===Env.DIRECTION_UP?this.ForcePlayerAnimation(2):this.direction===Env.DIRECTION_DOWN&&this.ForcePlayerAnimation(3))},Movement:function(t){this.node.setPosition(t)},ShowChargeShotParticle:function(){this.chargeShotBot.getComponent(cc.Animation).play("shot_bot"),this.chargeShotParticle.getComponent(cc.Animation).play("charge_shot")},PlayFootStep:function(){if(!this.isPlaySound){this.isPlaySound=!0;var t=this;setTimeout(function(){t.isPlaySound=!1},300);var e=this.audioFootStep[this.audioStep];cc.audioEngine.play(e,!1,1,function(){1===this.audioStep?this.audioStep=0:this.audioStep=1}.bind(this))}},setPlayerAnimation:function(t){var e=this.GetGenderInfo(),i=this.getComponent(cc.Animation),n=this.aniArray[e][t],s=i.getAnimationState(n);null!=s&&(s.isPlaying||i.play(n))},GetGenderInfo:function(){var t=n.getInstance().getCharNumber();n.getInstance().getInitStageData().step;return t},ForcePlayerAnimation:function(t){var e=n.getInstance().getCharNumber(),i=this.getComponent(cc.Animation),s=this.aniArray[e][t];i.getAnimationState(s);i.play(s)},changeSpriteDirection:function(){this.getComponent(cc.Animation);if(this.playerStatusInfo<2&&(clearInterval(this.deadIntevalID),this.PlayerInitAnimation()),1===this.playerStatusInfo){switch(this.direction){case Env.DIRECTION_UP:this.setPlayerAnimation(6);break;case Env.DIRECTION_DOWN:this.setPlayerAnimation(7);break;case Env.DIRECTION_RIGHT:this.setPlayerAnimation(5);break;case Env.DIRECTION_LEFT:this.setPlayerAnimation(4)}this.PlayFootStep()}else if(11===this.playerStatusInfo){if(this.isBombAnimation)return;this.isBombAnimation=!0,this.direction===Env.DIRECTION_LEFT?this.setPlayerAnimation(8):this.setPlayerAnimation(9);var t=this;setTimeout(function(){t.isBombAnimation=!1},1e3)}else if(21===this.playerStatusInfo)this.direction===Env.DIRECTION_LEFT?this.setPlayerAnimation(12):this.direction===Env.DIRECTION_RIGHT?this.setPlayerAnimation(13):this.direction===Env.DIRECTION_UP?this.setPlayerAnimation(14):this.direction===Env.DIRECTION_DOWN&&this.setPlayerAnimation(15);else if(33===this.playerStatusInfo)this.direction===Env.DIRECTION_LEFT?this.setPlayerAnimation(10):this.direction===Env.DIRECTION_RIGHT&&this.setPlayerAnimation(11);else if(9!==this.playerStatusInfo){if(38==this.playerStatusInfo||33===this.playerStatusInfo)return;this.direction===Env.DIRECTION_LEFT?this.setPlayerAnimation(0):this.direction===Env.DIRECTION_RIGHT?this.setPlayerAnimation(1):this.direction===Env.DIRECTION_UP?this.setPlayerAnimation(2):this.direction===Env.DIRECTION_DOWN&&this.setPlayerAnimation(3)}},Init:function(t,e){this.initPosition=t,this.node.setPosition(t),this._HideBubble(),this.PlayerInitAnimation(),this.node.zIndex=cc.macro.MAX_ZINDEX-1;var i=0;switch(e){case Env.DIRECTION_LEFT:i=Env.PLAYER_DEFAULT_LEFT;break;case Env.DIRECTION_RIGHT:i=Env.PLAYER_DEFAULT_RIGHT;break;case Env.DIRECTION_UP:i=Env.PLAYER_DEFAULT_UP;break;case Env.DIRECTION_DOWN:i=Env.PLAYER_DEFAULT_DOWN}i===Env.PLAYER_DEFAULT_LEFT?this.setPlayerAnimation(0):i===Env.PLAYER_DEFAULT_UP?this.setPlayerAnimation(2):i===Env.PLAYER_DEFAULT_DOWN?this.setPlayerAnimation(3):i===Env.PLAYER_DEFAULT_RIGHT&&this.setPlayerAnimation(1)},playerInit:function(){healParticle.loop=!1,this.node.setPosition(this.initPosition),this.direction=Env.DIRECTION_RIGHT,this.changeSpriteDirection()},setDirection:function(t){this.direction=t},SetHitStatus:function(){this.direction===Env.DIRECTION_LEFT?this.setPlayerAnimation(8):this.setPlayerAnimation(9)},setPlayerStatus:function(t){switch(this.playerStatusInfo=t,t){case 1:switch(this.direction){case Env.DIRECTION_UP:this.setPlayerAnimation(6);break;case Env.DIRECTION_DOWN:this.setPlayerAnimation(7);break;case Env.DIRECTION_RIGHT:this.setPlayerAnimation(5);break;case Env.DIRECTION_LEFT:this.setPlayerAnimation(4)}this.PlayFootStep();break;case 2:clearInterval(this.deadIntevalID),this.PlayerInitAnimation();break;case 9:this.PlayerDealAnimation();break;case 10:this.ShowMessage("\uc774 \ubc29\ud5a5\uc73c\ub85c \uc774\ub3d9\ud560\uc218 \uc5c6\uc5b4!");break;case 11:if(this.isBombAnimation)return;this.isBombAnimation=!0,this.direction===Env.DIRECTION_LEFT?this.setPlayerAnimation(8):this.setPlayerAnimation(9);var e=this;setTimeout(function(){e.isBombAnimation=!1},1e3);break;case 13:this.ShowMessage("\uc774\uacf3\uc5d0\uc11c \ud560\uc218 \uc5c6\ub294 \uba85\ub839\uc5b4\uc57c!");break;case 14:this.ShowMessage("\ubb38\uc790\uc5f4\uc774 \uc798\ubabb \uc785\ub825\ub418\uc5c8\uc5b4.");break;case 15:this.ShowMessage("\uace0\uccb4\ucd94\uc9c4\uc81c \uc7a5\ucc29!");break;case 16:this.ShowMessage("\uc561\uccb4\uc5f0\ub8cc \uc7a5\ucc29!");break;case 17:this.ShowMessage("\ucd94\uac00 \uc5d4\uc9c4 \uc7a5\ucc29!");break;case 18:this.ShowMessage("\uc798\ubabb\ub41c \uba85\ub839\uc5b4\uc57c!");break;case 21:this.direction===Env.DIRECTION_LEFT?this.setPlayerAnimation(12):this.direction===Env.DIRECTION_RIGHT?this.setPlayerAnimation(13):this.direction===Env.DIRECTION_UP?this.setPlayerAnimation(14):this.direction===Env.DIRECTION_DOWN&&this.setPlayerAnimation(15);break;case 22:this.ShowMessage("\uc810\ud504\ud558\uae30\uc5d4 \uc704\ud5d8\ud574");break;case 23:this.ShowMessage("\uc73d.. ");break;case 24:this.ShowMessage("\uc0b4\uac83\uac19\uc544!"),this.healParticle.resetSystem();break;case 25:this.ShowMessage("\ud68c\ubcf5 \uc544\uc774\ud15c\uc774 \uc5c6\uc5b4!");break;case 27:this.ShowMessage("list\uac00 \ube44\uc5b4\uc788\ub294\ub370?");break;case 29:this.ShowMessage("\ud0c0\uc785\uc774 \ud2c0\ub9b0\uac70\uac19\uc544");break;case 31:this.ShowMessage("\ud3ed\ud0c4\uc774 \uc5c6\uc5b4!");break;case 33:this.direction===Env.DIRECTION_LEFT?this.setPlayerAnimation(10):this.direction===Env.DIRECTION_RIGHT&&this.setPlayerAnimation(11);break;case 37:this.ShowMessage("\ud3ed\ud0c4\uc124\uce58\uc911");break;case 38:this.setPlayerAnimation(16),this.ShowChargeShotParticle();break;case 39:this.ShowMessage("\uc911\ub825\uc774 \ub108\ubb34\uac15\ud574\uc11c \uc810\ud504\uac00 \uc5b4\ub824\uc6cc")}this.ProcessEncryptWord(this.playerStatusInfo)},ProcessEncryptWord:function(t){if(!(t<100)){var e=t-100,i=n.getInstance().getInitPrintPointArray(e)+" \uc554\ud638\ud68d\ub4dd";this.ShowMessage(i)}},ShowPrintingBubble:function(){this.PrintMessage("\uc554\ud638\uc785\ub825")},PrintMessage:function(t){this.bubbleLabel.string=t,this._ShowBubble(),this.MessageDetector()},MessageDetector:function(){if(!this.isRunningDetector){this.isRunningDetector=!0;var t=this;this.mdID=setInterval(function(){19!=t.playerStatusInfo&&(setTimeout(function(){t._HideBubble()},500),t.InitMessageDetector())},30)}},InitMessageDetector:function(){this.isRunningDetector=!1,clearInterval(this.mdID)},ShowMessage:function(t){if(!this.isShowMessage){this.bubbleLabel.string=t,this._ShowBubble();var e=this;setTimeout(function(){e._HideBubble()},600)}},_HideBubble:function(){this.isShowMessage=!1,this.bubble.active=!1},_ShowBubble:function(){this.isShowMessage=!0,this.bubble.active=!0},PlayerInitAnimation:function(){!1!==this.playerIsDead&&(this.playerIsDead=!1,this.node.opacity=255)},PlayerDealAnimation:function(){if(!this.playerIsDead){this.playerIsDead=!0;var t=this;this.getComponent(cc.Animation);t.deadIntevalID=setInterval(function(e){t.node.opacity<1&&clearInterval(t.deadIntevalID),t.node.opacity-=20},20)}}}),cc._RF.pop()},{Controller:"Controller"}],SoundManager:[function(t,e,i){"use strict";cc._RF.push(e,"f474ez70q5GJ5iKnEUTFknO","SoundManager");var n=cc.Class({extends:cc.Component,statics:{_instance:null,getInstance:function(){return n._instance||(n._instance=new n,n._instance.init()),n._instance}},properties:{sound:{default:[],type:cc.AudioClip},isLoadedSFX:!1},init:function(){this._LoadSFX()},IsLoadCheck:function(){return null!==this.sound[7]},PlaySfx:function(t){if(t>=this.sound.length||t<0)console.error("SFX Load ERROR: Index out of range");else{var e=this.sound[t];e?cc.audioEngine.playEffect(e,!1):console.error("SFX NULL ERROR: No sound loaded for TAG "+t)}},_LoadSFX:function(){if(!this.isLoadedSFX){this.sound=new Array(8).fill(null);var t=function(t,e){var i=this;cc.loader.loadRes(Env.SFX_DIRECTORY_PATH+e,cc.AudioClip,function(n,s){n?console.error("Error loading sound for "+e+": ",n):i.sound[t]=s})};t.call(this,0,Env.SFX_FILENAME_DROP_SWITCH),t.call(this,1,Env.SFX_FILENAME_LASER_SWITCH),t.call(this,2,Env.SFX_FILENAME_EXPLOSION),t.call(this,3,Env.SFX_FILENAME_EARN),t.call(this,4,Env.SFX_FILENAME_DROP_ITEM),t.call(this,5,Env.SFX_FILENAME_LASER_ON),t.call(this,6,Env.SFX_FILENAME_LASER_OFF),t.call(this,7,Env.SFX_FILENAME_PARTS_DOCKING),this.isLoadedSFX=!0}}});cc._RF.pop()},{}]},{},["Controller","Env","GameManager","Loader","SoundManager","Boss","Gobject","Monster","ObjectLaiser","Player","MainScene"]);